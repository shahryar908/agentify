# ðŸš€ DEPLOYMENT GUIDE\n\n## Prerequisites\n\n### Required Software\n- **Node.js** 18+ and npm\n- **Python** 3.8+ and pip\n- **Git** for version control\n\n### API Keys Required\n- **Groq API Key** (for LLM functionality)\n- **Google Custom Search API Key** (optional, for enhanced search)\n- **Google Custom Search Engine ID** (optional)\n\n## Backend Deployment\n\n### 1. Environment Setup\n\n```bash\ncd backend\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n```\n\n### 2. Environment Variables\n\nCopy `.env.example` to `.env` and update:\n\n```bash\ncp .env.example .env\n```\n\n**Required Environment Variables:**\n```env\n# CRITICAL: Update these values!\nGROQ_API_KEY=your_actual_groq_api_key_here\nSECRET_KEY=your_super_secret_jwt_key_minimum_32_characters\n\n# Optional but recommended\nGOOGLE_CUSTOM_SEARCH_API_KEY=your_google_search_api_key\nGOOGLE_CUSTOM_SEARCH_ENGINE_ID=your_search_engine_id\n\n# Production settings\nDEBUG=False\nALLOWED_ORIGINS=https://yourdomain.com\n```\n\n### 3. Database Setup\n\n```bash\n# Initialize database\npython -c \"from database.connection import init_database; init_database()\"\n\n# Run any migrations if needed\n# (Currently using SQLite, no migrations needed)\n```\n\n### 4. Security Verification\n\n```bash\n# Verify no sensitive data in code\ngrep -r \"gsk_\" . --exclude-dir=.git --exclude=\".env*\"\n# Should return no results (except in .env files)\n\n# Check CORS configuration\ngrep -n \"allow_origins\" main.py\n# Should show restricted origins, not \"*\"\n```\n\n### 5. Start Backend Server\n\n```bash\n# Development\npython main.py\n\n# Production (with Gunicorn)\npip install gunicorn\ngunicorn main:app --host 0.0.0.0 --port 8002 --workers 4\n```\n\n## Frontend Deployment\n\n### 1. Environment Setup\n\n```bash\ncd frontend\n\n# Install dependencies\nnpm install\n\n# Install missing UI dependencies\nnpm install @radix-ui/react-label @radix-ui/react-tabs\nnpm install class-variance-authority clsx tailwind-merge\n```\n\n### 2. Environment Variables\n\nCreate `.env.local`:\n\n```bash\n# API Configuration\nNEXT_PUBLIC_API_URL=http://localhost:8002\n# For production: https://your-api-domain.com\n```\n\n### 3. Build and Start\n\n```bash\n# Development\nnpm run dev\n\n# Production build\nnpm run build\nnpm run start\n```\n\n## Production Deployment\n\n### Backend (FastAPI)\n\n**Option 1: Docker**\n```dockerfile\nFROM python:3.11-slim\n\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY . .\n\nEXPOSE 8002\nCMD [\"gunicorn\", \"main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8002\"]\n```\n\n**Option 2: Traditional Server**\n```bash\n# Install production dependencies\npip install gunicorn supervisor\n\n# Create systemd service\nsudo nano /etc/systemd/system/ai-agents-api.service\n```\n\n### Frontend (Next.js)\n\n**Option 1: Vercel (Recommended)**\n```bash\nnpm install -g vercel\nvercel --prod\n```\n\n**Option 2: Docker**\n```dockerfile\nFROM node:18-alpine\n\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\nCOPY . .\nRUN npm run build\n\nEXPOSE 3000\nCMD [\"npm\", \"start\"]\n```\n\n## Security Checklist\n\n### Pre-Deployment Security Audit\n\n- [ ] âœ… **API Keys Secured**: No hardcoded keys in source code\n- [ ] âœ… **Environment Variables**: All secrets in `.env` files\n- [ ] âœ… **CORS Configured**: Specific origins, not wildcards\n- [ ] âœ… **Authentication**: JWT tokens with secure secrets\n- [ ] âœ… **Input Validation**: All user inputs validated and sanitized\n- [ ] âœ… **Tool Registration**: Secure sandbox instead of `exec()`\n- [ ] âœ… **Error Handling**: No sensitive data in error messages\n- [ ] âœ… **HTTPS**: SSL certificates configured for production\n- [ ] âœ… **Database Security**: Connection strings secured\n- [ ] âœ… **File Permissions**: Proper access controls\n\n### Runtime Security\n\n- [ ] **Rate Limiting**: Configured for API endpoints\n- [ ] **Logging**: Security events logged but no sensitive data\n- [ ] **Monitoring**: Error tracking and performance monitoring\n- [ ] **Backups**: Database and configuration backups scheduled\n- [ ] **Updates**: Dependencies regularly updated\n\n## Performance Optimization\n\n### Backend Optimizations\n\n```bash\n# Enable compression\npip install brotli\n\n# Add to main.py:\n# app.add_middleware(GZipMiddleware, minimum_size=1000)\n```\n\n### Frontend Optimizations\n\n```json\n// next.config.js\nmodule.exports = {\n  compress: true,\n  images: {\n    formats: ['image/webp', 'image/avif'],\n  },\n  experimental: {\n    optimizeCss: true,\n  }\n}\n```\n\n## Monitoring and Maintenance\n\n### Health Checks\n\n**Backend Health Endpoint:**\n```bash\ncurl http://localhost:8002/health\n```\n\n**Database Connection:**\n```bash\n# Check database connectivity\npython -c \"from database.connection import engine; print('DB OK' if engine else 'DB FAIL')\"\n```\n\n### Log Monitoring\n\n```bash\n# Backend logs\ntail -f backend/logs/app.log\n\n# System logs\njournalctl -u ai-agents-api -f\n```\n\n### Performance Monitoring\n\n```bash\n# Check memory usage\nps aux | grep python\n\n# Check disk usage\ndf -h\n\n# Check network connections\nnetstat -an | grep :8002\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **\"Agent not found\" errors**\n   - Check database connectivity\n   - Verify agent creation process\n   - Check authentication tokens\n\n2. **CORS errors**\n   - Verify `ALLOWED_ORIGINS` in `.env`\n   - Check frontend API URL configuration\n\n3. **Authentication failures**\n   - Verify `SECRET_KEY` is set and consistent\n   - Check token expiration settings\n   - Clear browser localStorage\n\n4. **Tool registration errors**\n   - Verify secure tool registry is initialized\n   - Check Python syntax validation\n   - Review allowed imports list\n\n### Debug Mode\n\n```bash\n# Enable debug mode\necho \"DEBUG=True\" >> .env\n\n# Check detailed logs\ntail -f backend/logs/app.log | grep -E \"(ERROR|WARNING)\"\n```\n\n## Backup and Recovery\n\n### Database Backup\n\n```bash\n# SQLite backup\ncp backend/database/dev.db backend/database/backup_$(date +%Y%m%d).db\n\n# Automated backup script\n#!/bin/bash\nBACKUP_DIR=\"/backup/ai-agents\"\nDATE=$(date +%Y%m%d_%H%M%S)\ncp database/dev.db \"$BACKUP_DIR/db_backup_$DATE.db\"\nfind \"$BACKUP_DIR\" -name \"*.db\" -mtime +7 -delete\n```\n\n### Configuration Backup\n\n```bash\n# Backup environment files (without sensitive data)\ncp .env.example backup/\ncp frontend/.env.local.example backup/\n```\n\n## Scaling Considerations\n\n### Horizontal Scaling\n\n- **Load Balancer**: NGINX or cloud load balancer\n- **Database**: PostgreSQL for production\n- **Caching**: Redis for session storage\n- **CDN**: CloudFlare or AWS CloudFront\n\n### Vertical Scaling\n\n- **Memory**: 2GB+ RAM recommended\n- **CPU**: Multi-core for concurrent requests\n- **Storage**: SSD for database performance\n\n## Support\n\nFor issues or questions:\n1. Check the troubleshooting section above\n2. Review logs for detailed error messages\n3. Verify all environment variables are set correctly\n4. Check GitHub issues for known problems\n\n---\n\n**ðŸ”’ Security Note**: Never commit `.env` files or API keys to version control. Always use environment-specific configuration files."